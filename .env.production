# Production Environment Variables for Dokploy
# Copy these to Dokploy's Environment tab

# ===================================
# DOMAINS (Required)
# ===================================
FRONTEND_DOMAIN=spark.preprabbit.in
BACKEND_DOMAIN=api.spark.preprabbit.in

# ===================================
# API CONFIGURATION
# ===================================
# Backend API URL (routes through Next.js rewrites, no separate API domain needed)
# Leave empty to use relative paths (recommended for production)
NEXT_PUBLIC_API_URL=

# Backend public URL for OAuth callbacks (routes through frontend's Next.js proxy)
BACKEND_PUBLIC_URL=https://spark.preprabbit.in

# ===================================
# CORS CONFIGURATION
# ===================================
# Allowed origins for CORS (comma-separated)
# Support all current and future PrepRabbit subdomains
CORS_ORIGINS=https://spark.preprabbit.in,https://python.preprabbit.in,https://azure.preprabbit.in,https://databricks.preprabbit.in,https://preprabbit.in

# ===================================
# DATABASE PATHS (Auto-managed)
# ===================================
# These use the Docker volume, no need to change
DUCKDB_PATH=/app/data/spark_sword.duckdb
PROGRESS_DB_PATH=/app/data/progress.duckdb

# ===================================
# PYTHON/NODE ENVIRONMENT
# ===================================
NODE_ENV=production
PYTHONUNBUFFERED=1

# ===================================
# CENTRALIZED AUTHENTICATION (Shared Across All Subdomains)
# ===================================
# Google OAuth Configuration
# Single OAuth client works for all *.preprabbit.in subdomains
GOOGLE_CLIENT_ID=your-client-id-here.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret-here

# JWT Configuration (MUST be same across all PrepRabbit services)
JWT_SECRET_KEY=generate-with-python-secrets-token-urlsafe-32
SESSION_EXPIRE_MINUTES=10080

# Cookie Domain (shared across all subdomains)
# Set to .preprabbit.in to share auth cookies across spark/python/azure/databricks
COOKIE_DOMAIN=.preprabbit.in
COOKIE_SECURE=true
COOKIE_SAMESITE=lax

# Frontend URLs for OAuth redirects (supports multiple subdomains)
# Primary is used for default redirects, others are validated
FRONTEND_URL=https://spark.preprabbit.in
BACKEND_PUBLIC_URL=https://spark.preprabbit.in
ALLOWED_REDIRECT_DOMAINS=spark.preprabbit.in,python.preprabbit.in,azure.preprabbit.in,databricks.preprabbit.in,preprabbit.in
